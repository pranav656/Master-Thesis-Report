\chapter{Conclusions and Future Work}
\label{chp:conclusionsandfuturework}

\section{Goals and Research Questions revisited}
In the beginning of the chapter, a research question and goals for the project were proposed. Now, let us revisit them to find out whether we have reached the goals of the project. The project was divided into these four sub-questions as given below:
\begin{itemize}
\item What would be the image sensor that can be used for the camera? \\
In chapter 2 of this report, a survey of image sensors is conducted and the drawbacks of each sensor are presented. Based on various factors, OV2640 and OV5642 were chosen. This also indicates the achievement of the first goal.
\item How do we design the hardware and software for such a camera that can be used in Delfi-PQ satellite?\\
The main factor in choosing OV2640 and OV5642 was the presence of open source libraries,  and open source electronic interface hardware. The software and the hardware mechanism for controlling the cameras have been described in Chapter 4 of the report. All the experiments described in the later chapters of the report were developed using the same hardware and software described in Chapter 4. This also indicates the achievement of the second goal.
\item What would be the field of view and spatial resolution of the lensless camera?\\
An experimental setup to determine the acceptance cone of the image sensor has been devised. The experimental results were incorporated into the previously completed simulations. Based on the experimental results, OV2640 had an acceptance angle of 43.6 degrees. It was found that the field of view of the lensless system had reduced 38 percent and 31.8 percent in the horizontal and vertical directions compared to a conventional lens based system. The effective area of the sensor that could be used also reduced by 52 percent. The spatial resolution of the designed camera was calculated and the entire procedure for calculating the spatial resolution is described in Chapter 2 and Chapter 5 of the report. This also indicates the achievement of the third goal. The experiments for finding out the acceptance angle was performed using the OV2640. The OV5642 has an acceptance angle of 23 degrees(given by the datasheet). However, this claim is yet to be verified experimentally.
\item What would be the computational algorithm that would be used in such a lensless camera? \\
The computational algorithm mainly depends on the mask that we use for imaging. Doubly Toeplitz masks were chosen since they retain the separable property even in the presence of diffraction. The computational reconstruction method for separable doubly Toeplitz mask has been studied and simulated. It was found in the simulations that separable doubly Toeplitz mask could be used to reconstruct objects even in the presence of diffraction effects. The entire simulation workflow is described in Chapter 3 of the report.

\item How do we experimentally prove the concept of lensless imaging? \\
Experimental verification of lensless imaging required multiple stages of experiments. After determining the field of view of the OV2640 sensor, the imaging of the separable mask was tried using OV2640. However, it was found out that OV2640 could not be used due to the limitation of the onboard FIFO buffer of the camera. Because of this, we decided to use OV5642 which has a bigger FIFO buffer. OV5642 is able to image the mask perfectly and preserves the separable property of the mask. The entire experimental approach was done using singular value decomposition and is mentioned in Chapter 6 of the report.  

The next step was to determine the system matrices of the lensless camera. To do this, we decide to use a Hadamard basis matrix as it could provide enough amount of light to produce a measurable sensor response. Using a basis matrix also provided better reconstruction and preserved the original object property as seen in the simulation results. This method requires us to use $2N$ calibration patterns on the LCD if we want to reconstruct images of resolution $N \times N$. This method was not verified experimentally and forms the final step of proving the concept of lensless imaging experimentally. The strategy and scheme for achieving this are described in Chapter 7 of the report. This indicates that there is some more experimental verification required to achieve the final goal.

\end{itemize}

Now, let us come to the main research question:
\textbf{Is it possible to design ``lensless coded aperture" cameras with a small form-factor(thickness $<=$ 10 mm) using COTS(commercially available off-the-shelf) components that can be used in U-class Spacecraft ?}\\
The experimental results with commercially available camera modules OV2640 and OV5642 provide a good insight into the lensless imaging methodologies. The previous studies done in this field did not have any memory limitations like we faced with OV2640. The camera with bigger memory such as OV5642 could retain the properties of the mask when we experimentally tested them. A separable scene on the outside also yields a separable scene on the image sensor. A scheme for determining the system matrices of a lensless imaging system is designed and simulated. However, the experimental determination of this scheme has not yet been verified. The simulations and experiments done in this work provide a good picture and insight into the concept of lensless imaging as a whole. The experimental results achieved till now indicate that commercially available cameras can be used but more experiments need to be performed before this question can be answered with more certainty. 

\section{Future Work}
With the developed calibration patterns, it would be possible to reconstruct images of resolution $N \times N$. $N$ should be a power of 2 since the Hadamard basis matrices can only be generated as a square matrix whose rows and columns have sizes which are a power of 2. With the OV2640(currently not usable due to memory limitations) and OV5642, a maximum possible image of resolution $1024 \times 1024$, can be reconstructed if we are able to estimate the system matrices using these sensors experimentally. OV2640 consumes approximately 465 mW for a full-resolution picture(1600 $\times$ 1200) and OV5642 consumes 1.165 W for a full-resolution picture(2592 $\times$ 1944). The Delfi-PQ team has allotted a 4W budget for the entire imager(including the microcontroller). If OV5642 is chosen, 2.8W will remain for the microcontroller and the RS-485 data interface circuitry which would be used for communication with the main onboard computer of the satellite. At this stage, it would not be possible to decide the exact thickness of the camera as the final-proof-of-concept is not yet available.

It was observed during the experiments that the sensor was not able to produce an output in correlation with the simulation data. The problem was traced to the non-binary behavior of the mask produced by SLM. A fabricated photomask can provide us with superior performance compared to an SLM. It would be possible to stick the photomask to the glass plate on the sensor(which leads to a thickness of $500 \ \mu m$ ). With the current setup, it was not possible to bring the sensor closer than 1 centimeter. There is a great scope for developing the work mentioned in this thesis. This work can be improved and extended in the following ways:
\begin{itemize}
\item Experimental determination of System Matrices: A scheme for experimental determination of the system matrix has been described in Chapter 7 of the report. This needs to be completed to completely realize the concept of lensless imaging. The scheme described is extremely time-consuming as it requires $2N$ measurements(one-time procedure) to perform complete reconstructions for $N \times N$ resolution images. This scheme can also be improved to reduce the number of measurements needed to accurately estimate the system matrices. 

\item Fabrication with masks: This work uses transmissive Spatial light modulators(SLM) to simulate the effects of a mask. It was observed that a complete binary mask cannot be achieved with this equipment. Lithographic photomasks can be fabricated and can offer better performance than using an SLM. The system matrices must also be estimated for a photomask based lensless imaging system.

\item Improving the computational method for reconstruction: This work uses regularization along with matrix inversion to perform reconstructions. This method can also be improved using other methods to denoise the reconstruction such as SVD, BM3D and total variation based methods\cite{Flatcam}. These methods could be tried out on the existing simulations and studied whether they provide better reconstructions.

\item Hardware Improvements: OV2640 could not be used due to the limited onboard memory. The future work can also look into improving the camera hardware by replacing the memory of the camera module. This would also require a change in the hardware/software implementations of the library. Arducam can be contacted on how to achieve this. Also, they release improved versions of the camera modules every year.
\end{itemize}

